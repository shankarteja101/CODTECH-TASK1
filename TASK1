CREATE TABLE BOOKS (
    BOOKID INT PRIMARY KEY ,
    TITLE VARCHAR(255) NOT NULL ,
    AUTHOR VARCHAR(255) NOT NULL ,
    GENRE VARCHAR(255) NOT NULL ,
    PUBLISHEDYEAR INT ,
    COPIESAVAILABLE INT DEFAULT 0 );

INSERT INTO BOOKS ( BOOKID, TITLE, AUTHOR, GENRE, PUBLISHEDYEAR, COPIESAVAILABLE) 
VALUES ( 1, 'PLAYBOY', 'PURUSH', 'LOVE', 2004, 4 ) ,
       ( 2, 'MYDEVIL', 'MONISH','HORROR',2004, 5 );

CREATE TABLE MEMBERS (
    MEMBERID INT PRIMARY KEY ,
    FIRSTNAME VARCHAR(255) NOT NULL,
    LASTNAME VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255) NOT NULL UNIQUE ,
    JOINDATE DATE NOT NULL );

INSERT INTO MEMBERS ( MEMBERID, FIRSTNAME, LASTNAME, EMAIL, JOINDATE ) 
 VALUES ( 1, 'MONISH', 'GOUD', 'monish147@gmail.com', '2013-03-23' ),
        ( 2, 'KANDU', 'PURUSH', 'purush36@gmail.com', '2015-05-10' ) ;

CREATE TABLE Transactions (
    TRANSACTIONID INT PRIMARY KEY,
    BOOKID INT ,
   MEMBERID INT ,
    BORROWDATE DATE NOT NULL ,
    RETURNDATE DATE NOT NULL ,
    FOREIGN KEY (BOOKID) REFERENCES BOOKS(BOOKID),
    FOREIGN KEY (MEMBERID) REFERENCES MEMBERS(MEMBERID) );

INSERT INTO transactions ( TRANSACTIONID, BOOKID, MEMBERID, BORROWDATE, RETURNDATE ) 
VALUES ( 1, 1, 1, '2016-07-11', NULL ),
       ( 2, 2, 2, '2018-06-19', '2018-06-27') ;

UPDATE Books SET
CopiesAvailable = 9
WHERE BookID = 1;

UPDATE Transactions SET
ReturnDate = '2016-07-19'
WHERE TransactionID = 1;

DELETE FROM Books
WHERE BookID = 2;

DELETE FROM Members
WHERE MemberID = 2;

DELETE FROM Transactions
WHERE TransactionID = 2;

SELECT * FROM Books;

SELECT * FROM Members;

SELECT * FROM Transactions;
